using FutureSpaceAPI.Domain.Entities;
using FutureSpaceAPI.Domain.Interfaces.Repositories;
using FutureSpaceAPI.Domain.Interfaces.Services;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

namespace FutureSpaceAPI.Application.Services
{
    public class LauncherService : ILauncherService
    {
        private readonly ILauncherRepository _launcherRepository;

        public LauncherService(ILauncherRepository launcherRepository)
        {
            _launcherRepository = launcherRepository;
        }

        public async Task<List<Launcher>> GetLaunchersByPageAsync(int offset)
        {
            try
            {
                HttpClient _httpClient = new();

                string jsonString = "{\"count\":6956,\"next\":\"https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=20\",\"previous\":\"https://ll.thespacedevs.com/2.0.0/launch/?limit=10\",\"results\":[{\"id\":\"6a7f56f9-2565-4b6c-b0c5-23e9c74a2368\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/6a7f56f9-2565-4b6c-b0c5-23e9c74a2368/\",\"launch_library_id\":null,\"slug\":\"sputnik-8a91-d1-2\",\"name\":\"Sputnik 8A91 | D1- 2\",\"status\":{\"id\":3,\"name\":\"Success\"},\"net\":\"1958-05-15T07:12:00Z\",\"window_end\":\"1958-05-15T07:12:00Z\",\"window_start\":\"1958-05-15T07:12:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":66,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/66/\",\"name\":\"Soviet Space Program\",\"type\":\"Government\"},\"rocket\":{\"id\":3013,\"configuration\":{\"id\":469,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/469/\",\"name\":\"Sputnik 8A91\",\"family\":\"Sputnik\",\"full_name\":\"Sputnik 8A91\",\"variant\":\"8A91\"}},\"mission\":{\"id\":1437,\"launch_library_id\":null,\"name\":\"D1- 2\",\"description\":\"First complex scientific satellite to reach orbit.\",\"launch_designator\":null,\"type\":\"Earth Science\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":32,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/32/\",\"agency_id\":null,\"name\":\"1/5\",\"info_url\":null,\"wiki_url\":\"\",\"map_url\":\"https://www.google.com/maps?q=45.92,63.342\",\"latitude\":\"45.92\",\"longitude\":\"63.342\",\"location\":{\"id\":15,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/15/\",\"name\":\"Baikonur Cosmodrome, Republic of Kazakhstan\",\"country_code\":\"KAZ\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg\",\"total_launch_count\":1541,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg\",\"total_launch_count\":487},\"webcast_live\":false,\"image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/sputnik_8a91_image_20210830171943.png\",\"infographic\":null,\"program\":[]},{\"id\":\"a861fb4d-8988-468b-abd1-a6e8abe5f2c7\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/a861fb4d-8988-468b-abd1-a6e8abe5f2c7/\",\"launch_library_id\":null,\"slug\":\"vanguard-vanguard-5\",\"name\":\"Vanguard | Vanguard\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-05-28T03:46:20Z\",\"window_end\":\"1958-05-28T03:46:20Z\",\"window_start\":\"1958-05-28T03:46:20Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3014,\"configuration\":{\"id\":449,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/449/\",\"name\":\"Vanguard\",\"family\":\"Vanguard\",\"full_name\":\"Vanguard\",\"variant\":\"\"}},\"mission\":{\"id\":1432,\"launch_library_id\":null,\"name\":\"Vanguard\",\"description\":\"Small satellite used to test the Vanguard three-stage launch vehicle.\",\"launch_designator\":null,\"type\":\"Test Flight\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":118,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/118/\",\"agency_id\":166,\"name\":\"Launch Complex 18A\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Launch_Complex_18\",\"map_url\":\"https://www.google.com/maps?q=28.4493,-80.564494\",\"latitude\":\"28.4493\",\"longitude\":\"-80.564494\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":896,\"total_landing_count\":34},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_118_20200803143338.jpg\",\"total_launch_count\":18},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"57e64adf-5c20-4c81-b17a-587b44d574b0\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/57e64adf-5c20-4c81-b17a-587b44d574b0/\",\"launch_library_id\":null,\"slug\":\"vanguard-vanguard-6\",\"name\":\"Vanguard | Vanguard\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-06-26T05:00:52Z\",\"window_end\":\"1958-06-26T05:00:52Z\",\"window_start\":\"1958-06-26T05:00:52Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3015,\"configuration\":{\"id\":449,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/449/\",\"name\":\"Vanguard\",\"family\":\"Vanguard\",\"full_name\":\"Vanguard\",\"variant\":\"\"}},\"mission\":{\"id\":1432,\"launch_library_id\":null,\"name\":\"Vanguard\",\"description\":\"Small satellite used to test the Vanguard three-stage launch vehicle.\",\"launch_designator\":null,\"type\":\"Test Flight\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":118,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/118/\",\"agency_id\":166,\"name\":\"Launch Complex 18A\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Launch_Complex_18\",\"map_url\":\"https://www.google.com/maps?q=28.4493,-80.564494\",\"latitude\":\"28.4493\",\"longitude\":\"-80.564494\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":896,\"total_landing_count\":34},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_118_20200803143338.jpg\",\"total_launch_count\":18},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"64da1836-0c00-4074-ab0a-f9d0ee6b1221\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/64da1836-0c00-4074-ab0a-f9d0ee6b1221/\",\"launch_library_id\":null,\"slug\":\"project-pilot-nots-1\",\"name\":\"Project Pilot | NOTS 1\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-07-25T00:00:00Z\",\"window_end\":\"1958-07-25T00:00:00Z\",\"window_start\":\"1958-07-25T00:00:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3016,\"configuration\":{\"id\":344,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/344/\",\"name\":\"Project Pilot\",\"family\":\"\",\"full_name\":\"Project Pilot\",\"variant\":\"\"}},\"mission\":{\"id\":1438,\"launch_library_id\":null,\"name\":\"NOTS 1\",\"description\":\"The project pilot payloads were small cylindrical satellites. These missions intended to be the first to launch a satellite from an aircraft. They had only a single instrument, a very primitive infrared line scanning device to make IR images of the ground.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":145,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/145/\",\"agency_id\":null,\"name\":\"Naval Air Weapons Station China Lake\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Naval_Air_Weapons_Station_China_Lake\",\"map_url\":\"https://www.google.com/maps?q=35.6855556,-117.6941384\",\"latitude\":\"35.6855556\",\"longitude\":\"-117.6941384\",\"location\":{\"id\":144,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/144/\",\"name\":\"Air launch to Suborbital flight\",\"country_code\":\"\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_144_20200803142439.jpg\",\"total_launch_count\":80,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_145_20200803143330.jpg\",\"total_launch_count\":6},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"e0975cef-e8c6-4f35-bbf7-1b55963e06a5\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/e0975cef-e8c6-4f35-bbf7-1b55963e06a5/\",\"launch_library_id\":null,\"slug\":\"juno-i-explorer-4\",\"name\":\"Juno-I | Explorer 4\",\"status\":{\"id\":3,\"name\":\"Success\"},\"net\":\"1958-07-26T15:00:57Z\",\"window_end\":\"1958-07-26T15:00:57Z\",\"window_start\":\"1958-07-26T15:00:57Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":271,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/271/\",\"name\":\"Army Ballistic Missile Agency\",\"type\":\"Government\"},\"rocket\":{\"id\":3017,\"configuration\":{\"id\":324,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/324/\",\"name\":\"Juno-I\",\"family\":\"Redstone\",\"full_name\":\"Juno-I\",\"variant\":\"Juno I\"}},\"mission\":{\"id\":1439,\"launch_library_id\":null,\"name\":\"Explorer 4\",\"description\":\"An American satellite in order to study the Van Allen radiation belts and the effects of nuclear explosions upon these belts.\",\"launch_designator\":null,\"type\":\"Earth Science\",\"orbit\":{\"id\":12,\"name\":\"Medium Earth Orbit\",\"abbrev\":\"MEO\"}},\"pad\":{\"id\":123,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/123/\",\"agency_id\":161,\"name\":\"Launch Complex 5\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Launch_Complex_5\",\"map_url\":\"https://www.google.com/maps?q=28.43942,-80.573301\",\"latitude\":\"28.43942\",\"longitude\":\"-80.573301\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":896,\"total_landing_count\":34},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_123_20200803143235.jpg\",\"total_launch_count\":13},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"ac4c0c44-1925-4636-99b5-8c3b33d6c62a\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/ac4c0c44-1925-4636-99b5-8c3b33d6c62a/\",\"launch_library_id\":null,\"slug\":\"project-pilot-nots-2\",\"name\":\"Project Pilot | NOTS 2\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-08-12T00:00:00Z\",\"window_end\":\"1958-08-12T00:00:00Z\",\"window_start\":\"1958-08-12T00:00:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3018,\"configuration\":{\"id\":344,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/344/\",\"name\":\"Project Pilot\",\"family\":\"\",\"full_name\":\"Project Pilot\",\"variant\":\"\"}},\"mission\":{\"id\":1440,\"launch_library_id\":null,\"name\":\"NOTS 2\",\"description\":\"The project pilot payloads were small cylindrical satellites. These missions intended to be the first to launch a satellite from an aircraft. They had only a single instrument, a very primitive infrared line scanning device to make IR images of the ground.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":145,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/145/\",\"agency_id\":null,\"name\":\"Naval Air Weapons Station China Lake\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Naval_Air_Weapons_Station_China_Lake\",\"map_url\":\"https://www.google.com/maps?q=35.6855556,-117.6941384\",\"latitude\":\"35.6855556\",\"longitude\":\"-117.6941384\",\"location\":{\"id\":144,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/144/\",\"name\":\"Air launch to Suborbital flight\",\"country_code\":\"\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_144_20200803142439.jpg\",\"total_launch_count\":80,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_145_20200803143330.jpg\",\"total_launch_count\":6},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"5408eda7-a3cc-48d2-9a62-e77a3cf86bc1\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/5408eda7-a3cc-48d2-9a62-e77a3cf86bc1/\",\"launch_library_id\":null,\"slug\":\"thor-able-i-able-i-pioneer\",\"name\":\"Thor Able I | Able I (Pioneer)\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-08-17T12:18:00Z\",\"window_end\":\"1958-08-17T12:18:00Z\",\"window_start\":\"1958-08-17T12:18:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":271,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/271/\",\"name\":\"Army Ballistic Missile Agency\",\"type\":\"Government\"},\"rocket\":{\"id\":3019,\"configuration\":{\"id\":388,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/388/\",\"name\":\"Thor Able I\",\"family\":\"Thor\",\"full_name\":\"Thor Able I\",\"variant\":\"Able I\"}},\"mission\":{\"id\":1441,\"launch_library_id\":null,\"name\":\"Able I (Pioneer)\",\"description\":\"The first pioneer orbiter, pioneer 0 was a lunar orbiter intended to enter a lunar orbit for observation. However, the mission failed 77 seconds into launch.\",\"launch_designator\":null,\"type\":\"Lunar Exploration\",\"orbit\":{\"id\":11,\"name\":\"Lunar Orbit\",\"abbrev\":\"LO\"}},\"pad\":{\"id\":14,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/14/\",\"agency_id\":null,\"name\":\"Space Launch Complex 17A\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Space_Launch_Complex_17\",\"map_url\":\"https://www.google.com/maps?q=28.4472,-80.565\",\"latitude\":\"28.4472\",\"longitude\":\"-80.565\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":896,\"total_landing_count\":34},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_14_20200803143451.jpg\",\"total_launch_count\":145},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"ee6958bf-155d-4400-9d9a-9d3e27c56d6d\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/ee6958bf-155d-4400-9d9a-9d3e27c56d6d/\",\"launch_library_id\":null,\"slug\":\"project-pilot-nots-3\",\"name\":\"Project Pilot | NOTS 3\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-08-22T00:00:00Z\",\"window_end\":\"1958-08-22T00:00:00Z\",\"window_start\":\"1958-08-22T00:00:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3020,\"configuration\":{\"id\":344,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/344/\",\"name\":\"Project Pilot\",\"family\":\"\",\"full_name\":\"Project Pilot\",\"variant\":\"\"}},\"mission\":{\"id\":1442,\"launch_library_id\":null,\"name\":\"NOTS 3\",\"description\":\"The project pilot payloads were small cylindrical satellites. These missions intended to be the first to launch a satellite from an aircraft. They had only a single instrument, a very primitive infrared line scanning device to make IR images of the ground.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":145,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/145/\",\"agency_id\":null,\"name\":\"Naval Air Weapons Station China Lake\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Naval_Air_Weapons_Station_China_Lake\",\"map_url\":\"https://www.google.com/maps?q=35.6855556,-117.6941384\",\"latitude\":\"35.6855556\",\"longitude\":\"-117.6941384\",\"location\":{\"id\":144,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/144/\",\"name\":\"Air launch to Suborbital flight\",\"country_code\":\"\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_144_20200803142439.jpg\",\"total_launch_count\":80,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_145_20200803143330.jpg\",\"total_launch_count\":6},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"a17719ee-5a39-452d-afc6-770d3c6deb1b\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/a17719ee-5a39-452d-afc6-770d3c6deb1b/\",\"launch_library_id\":null,\"slug\":\"juno-i-explorer-5\",\"name\":\"Juno-I | Explorer 5\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-08-24T06:17:22Z\",\"window_end\":\"1958-08-24T06:17:22Z\",\"window_start\":\"1958-08-24T06:17:22Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":271,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/271/\",\"name\":\"Army Ballistic Missile Agency\",\"type\":\"Government\"},\"rocket\":{\"id\":3021,\"configuration\":{\"id\":324,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/324/\",\"name\":\"Juno-I\",\"family\":\"Redstone\",\"full_name\":\"Juno-I\",\"variant\":\"Juno I\"}},\"mission\":{\"id\":1443,\"launch_library_id\":null,\"name\":\"Explorer 5\",\"description\":\"Explorer 5 was a US satellite designed to study the van allen radiation belts, however, the launch failed after the first stage collided with the second stage.\",\"launch_designator\":null,\"type\":\"Earth Science\",\"orbit\":{\"id\":12,\"name\":\"Medium Earth Orbit\",\"abbrev\":\"MEO\"}},\"pad\":{\"id\":123,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/123/\",\"agency_id\":161,\"name\":\"Launch Complex 5\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Cape_Canaveral_Launch_Complex_5\",\"map_url\":\"https://www.google.com/maps?q=28.43942,-80.573301\",\"latitude\":\"28.43942\",\"longitude\":\"-80.573301\",\"location\":{\"id\":12,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/12/\",\"name\":\"Cape Canaveral, FL, USA\",\"country_code\":\"USA\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_12_20200803142519.jpg\",\"total_launch_count\":896,\"total_landing_count\":34},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_123_20200803143235.jpg\",\"total_launch_count\":13},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]},{\"id\":\"31bcb852-0c9f-4f1f-a201-a108c88e77f8\",\"url\":\"https://ll.thespacedevs.com/2.0.0/launch/31bcb852-0c9f-4f1f-a201-a108c88e77f8/\",\"launch_library_id\":null,\"slug\":\"project-pilot-nots-4\",\"name\":\"Project Pilot | NOTS 4\",\"status\":{\"id\":4,\"name\":\"Failure\"},\"net\":\"1958-08-25T00:00:00Z\",\"window_end\":\"1958-08-25T00:00:00Z\",\"window_start\":\"1958-08-25T00:00:00Z\",\"inhold\":false,\"tbdtime\":false,\"tbddate\":false,\"probability\":null,\"holdreason\":null,\"failreason\":null,\"hashtag\":null,\"launch_service_provider\":{\"id\":166,\"url\":\"https://ll.thespacedevs.com/2.0.0/agencies/166/\",\"name\":\"US Navy\",\"type\":\"Government\"},\"rocket\":{\"id\":3022,\"configuration\":{\"id\":344,\"launch_library_id\":null,\"url\":\"https://ll.thespacedevs.com/2.0.0/config/launcher/344/\",\"name\":\"Project Pilot\",\"family\":\"\",\"full_name\":\"Project Pilot\",\"variant\":\"\"}},\"mission\":{\"id\":1444,\"launch_library_id\":null,\"name\":\"NOTS 4\",\"description\":\"The project pilot payloads were small cylindrical satellites. These missions intended to be the first to launch a satellite from an aircraft. They had only a single instrument, a very primitive infrared line scanning device to make IR images of the ground.\",\"launch_designator\":null,\"type\":\"Government/Top Secret\",\"orbit\":{\"id\":8,\"name\":\"Low Earth Orbit\",\"abbrev\":\"LEO\"}},\"pad\":{\"id\":145,\"url\":\"https://ll.thespacedevs.com/2.0.0/pad/145/\",\"agency_id\":null,\"name\":\"Naval Air Weapons Station China Lake\",\"info_url\":null,\"wiki_url\":\"https://en.wikipedia.org/wiki/Naval_Air_Weapons_Station_China_Lake\",\"map_url\":\"https://www.google.com/maps?q=35.6855556,-117.6941384\",\"latitude\":\"35.6855556\",\"longitude\":\"-117.6941384\",\"location\":{\"id\":144,\"url\":\"https://ll.thespacedevs.com/2.0.0/location/144/\",\"name\":\"Air launch to Suborbital flight\",\"country_code\":\"\",\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_144_20200803142439.jpg\",\"total_launch_count\":80,\"total_landing_count\":0},\"map_image\":\"https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_145_20200803143330.jpg\",\"total_launch_count\":6},\"webcast_live\":false,\"image\":null,\"infographic\":null,\"program\":[]}]}\r\n";

                if (true)
                {
                    var data = JsonConvert.DeserializeObject<dynamic>(jsonString);
                    var launchers = new List<Launcher>();

                    foreach (var result in data.results)
                    {
                        var launch = JsonConvert.DeserializeObject<Launch>(result.ToString());

                        var launcher = new Launcher()
                        {
                            LaunchId = launch.Id,
                            LaunchJson = result.ToString(),
                            ImportDate = DateTime.Now,
                        };

                        launchers.Add(launcher);
                    }

                    await _launcherRepository.InsertInRangeAsync(launchers);
                    return launchers;
                }
                else
                {
                    return null;
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }
}
